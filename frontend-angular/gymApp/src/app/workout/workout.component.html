<div class="mb-3 d-flex justify-content-end">
  <div class="btn-group mr-2">
    <button class="btn btn-info" data-target="#yourWorkoutsModal" data-toggle="modal" type="button">
      <i class="fa fa-circle-user"></i> {{'WORKOUTS.TABLE.BUTTON.YOUR_WORKOUTS' | translate}}
    </button>
  </div>
  <div class="btn-group mr-2">
    <button class="btn btn-info" data-target="#trainerScheduleModal" data-toggle="modal" type="button">
      <i class="fa fa-person"></i> {{'WORKOUTS.TABLE.BUTTON.TRAINER_SCHEDULE' | translate}}
    </button>
  </div>
  <div class="btn-group mr-2">
    <button type="button" class="btn btn-info" data-toggle="modal" data-target="#addWorkoutModal" *ngIf="isAdminOrCoach">
      <i class="fa fa-plus"></i> {{'WORKOUTS.TABLE.BUTTON.ADD_WORKOUT' | translate}}
    </button>
  </div>
  <div class="btn-group">
    <button type="button" (click)="getWorkouts(true)" class="btn btn-info">
      <i *ngIf="refreshing" class="fas fa-sync fa-spin"></i><i *ngIf="!refreshing" class="fas fa-sync"></i>
    </button>
  </div>
</div>
<div class="d-flex align-items-center justify-content-center">
  <button class="btn btn-outline-info" (click)="removeDay()" [disabled]="disableRemoveDayButton()">
    <i class="fas fa-minus"></i>
  </button>
  <input class="btn btn-outline-info mx-2" type="date" [(ngModel)]="selectedDate" (change)="onDateChange()">
  <button class="btn btn-outline-info" (click)="addDay()">
    <i class="fas fa-plus"></i>
  </button>
</div>
<a aria-hidden="true" class="btn btn-info disabled placeholder col-12 justify-content-center" href="#" tabindex="-1">{{'WORKOUTS.TABLE.TITLE.AVAILABLE_WORKOUTS' | translate}}</a>
<div class="table-responsive">
  <table class="table table-hover">
    <thead class="table-borderless">
    <tr class="text-center">
      <th [hidden]="!isAdmin" class="d-none d-lg-table-cell">Id</th>
      <th>{{'WORKOUTS.TABLE.NAME' | translate}}</th>
      <th>{{'WORKOUTS.TABLE.ROOM_NUMBER' | translate}}</th>
      <th class="d-none d-lg-table-cell">{{'WORKOUTS.TABLE.TRAINER_USERNAME' | translate}}</th>
      <th>{{'WORKOUTS.TABLE.START_DATE' | translate}}</th>
      <th>{{'WORKOUTS.TABLE.END_DATE' | translate}}</th>
      <th class="d-none d-md-table-cell">{{'WORKOUTS.TABLE.CAPPACITY' | translate}}</th>
      <th class="d-none d-md-table-cell">{{'WORKOUTS.TABLE.PARTICIPANTS_NUMBER' | translate}}</th>
      <th class="d-none d-md-table-cell">{{'WORKOUTS.TABLE.DIFFICULTY' | translate}}</th>
      <th>{{'WORKOUTS.TABLE.ACTIONS' | translate}}</th>
    </tr>
    </thead>
    <tbody *ngFor="let appWorkout of filteredWorkouts | paginate: { itemsPerPage: 5, currentPage: currentWorkoutsPage, id:'currentWorkoutsPage' }">
    <tr class="text-center">
      <td (click)="onSelectWorkout(appWorkout)" [hidden]="!isAdmin" class="d-none d-lg-table-cell">{{appWorkout.id}}</td>
      <td (click)="onSelectWorkout(appWorkout)">{{appWorkout.workoutName}}</td>
      <td (click)="onSelectWorkout(appWorkout)">{{appWorkout.roomNumber}}</td>
      <td (click)="onSelectWorkout(appWorkout)" class="d-none d-lg-table-cell">{{appWorkout.trainerUsername}}</td>
      <td (click)="onSelectWorkout(appWorkout)">{{appWorkout.workoutStartDate | date:'medium'}}</td>
      <td (click)="onSelectWorkout(appWorkout)">{{appWorkout.workoutEndDate | date:'medium'}}</td>
      <td (click)="onSelectWorkout(appWorkout)" class="d-none d-md-table-cell">{{appWorkout.capacity}}</td>
      <td (click)="onSelectWorkout(appWorkout)" class="d-none d-md-table-cell">{{appWorkout.participantsNumber}}</td>
      <td (click)="onSelectWorkout(appWorkout)" class="d-none d-md-table-cell">{{'WORKOUTS.DIFFICULTY.' + appWorkout.workoutDifficulty | translate}}</td>
      <td class="">
        <div class="btn-group">
          <button  (click)="onJoinWorkout(appWorkout)" class="btn btn-outline-info"><i class="fas fa-plus"></i></button>
          <button (click)="onEditWorkout(appWorkout)" [hidden]="!isAdmin" class="btn btn-outline-info"><i class="fas fa-edit"></i></button>
          <button (click)="onDeleteWorkout(appWorkout.id)" [hidden]="!isAdmin" class="btn btn-outline-danger"><i
            class="fas fa-trash"></i></button>
        </div>
      </td>
    </tr>
    </tbody>
  </table>
  <pagination-controls (pageChange)="currentWorkoutsPage = $event" id="currentWorkoutsPage"></pagination-controls>
</div>



<button [hidden]="true" data-target="#viewWorkoutModal" data-toggle="modal" id="openWorkoutInfo" type="button">
</button>
<button [hidden]="true" data-target="#editWorkoutModal" data-toggle="modal" id="openWorkoutEdit" type="button">
</button>
<button [hidden]="true" data-target="#viewTrainerWorkoutModal" data-toggle="modal" id="openTrainerWorkoutInfo" type="button">
</button>

<!-- modal workout info -->
<div aria-hidden="true" aria-labelledby="" class="modal fade bd-example-modal-lg" id="viewWorkoutModal" role="dialog"
     tabindex="-1">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center" id="exampleModalLongTitle">{{selectedWorkout.workoutName}}
        </h5>
        <button aria-label="Close" class="close" data-dismiss="modal" type="button">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div>
          <div class="card">
            <ul class="list-group list-group-flush">
              <li class="list-group-item"></li>
              <li class="list-group-item"><b class="float-right">{{'WORKOUTS.TABLE.NAME' | translate}}</b>{{selectedWorkout.workoutName}}
              </li>
              <li class="list-group-item"><b class="float-right">{{'WORKOUTS.TABLE.ROOM_NUMBER' | translate}}</b>{{selectedWorkout.roomNumber}}
              </li>
              <li class="list-group-item"><b class="float-right">{{'WORKOUTS.TABLE.START_DATE' | translate}}</b>{{selectedWorkout.workoutStartDate}}
              </li>
              <li class="list-group-item"><b class="float-right">{{'WORKOUTS.TABLE.END_DATE' | translate}}</b>{{selectedWorkout.workoutEndDate}}
              </li>
              <li class="list-group-item"><b class="float-right">{{'WORKOUTS.TABLE.TRAINER_USERNAME' | translate}}</b>{{selectedWorkout.trainerUsername}}
              </li>
              <li class="list-group-item"><b class="float-right">{{'WORKOUTS.TABLE.CAPPACITY' | translate}}</b>{{selectedWorkout.capacity}}
              </li>
              <li class="list-group-item"><b class="float-right">{{'WORKOUTS.TABLE.PARTICIPANTS_NUMBER' | translate}}</b>{{selectedWorkout.participantsNumber}}
              </li>
              <li class="list-group-item"><b class="float-right">{{'WORKOUTS.TABLE.DIFFICULTY' | translate}}</b>{{selectedWorkout.workoutDifficulty}}
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-dismiss="modal" type="button">{{'WORKOUTS.TABLE.CLOSE' | translate}}</button>
      </div>
    </div>
  </div>
</div>

<!-- modal your workouts modal info -->
<div aria-hidden="true" aria-labelledby="" class="modal fade bd-example-modal-lg" id="yourWorkoutsModal" role="dialog"
     tabindex="-1">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center" id="yourWorkoutsModalTitle">{{'WORKOUTS.TABLE.TITLE.YOUR_WORKOUTS' | translate}}
        </h5>
        <button aria-label="Close" class="close" data-dismiss="modal" type="button">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="table-responsive">
          <table class="table table-hover">
            <thead class="table-borderless">
            <tr class="text-center">
              <th>{{'WORKOUTS.TABLE.NAME' | translate}}</th>
              <th>{{'WORKOUTS.TABLE.ROOM_NUMBER' | translate}}</th>
              <th class="d-none d-lg-table-cell">{{'WORKOUTS.TABLE.TRAINER_USERNAME' | translate}}</th>
              <th>{{'WORKOUTS.TABLE.START_DATE' | translate}}</th>
              <th>{{'WORKOUTS.TABLE.END_DATE' | translate}}</th>
              <th class="d-none d-md-table-cell">{{'WORKOUTS.TABLE.DIFFICULTY' | translate}}</th>
              <th>{{'WORKOUTS.TABLE.ACTIONS' | translate}}</th>
            </tr>
            </thead>
            <tbody *ngFor="let appUserWorkout of userWorkouts | paginate: { itemsPerPage: 5, currentPage: currentUserWorkoutsPage, id:'currentUserWorkoutsPage' }">
            <tr class="text-center">
              <td>{{appUserWorkout.workout.workoutName}}</td>
              <td>{{appUserWorkout.workout.roomNumber}}</td>
              <td class="d-none d-lg-table-cell">{{appUserWorkout.workout.trainerUsername}}</td>
              <td>{{appUserWorkout.workout.workoutStartDate | date:'medium'}}</td>
              <td>{{appUserWorkout.workout.workoutEndDate | date:'medium'}}</td>
              <td class="d-none d-md-table-cell">{{appUserWorkout.workout.workoutDifficulty}}</td>
              <td>
                <div class="btn-group">
                  <button (click)="onLeaveWorkout(appUserWorkout.id)" class="btn btn-outline-danger"><i class="fas fa-minus"></i></button>
                </div>
              </td>
            </tr>
            </tbody>
          </table>
          <pagination-controls (pageChange)="currentUserWorkoutsPage = $event" id="currentUserWorkoutsPage"></pagination-controls>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-dismiss="modal" type="button">{{'WORKOUTS.TABLE.CLOSE' | translate}}</button>
      </div>
    </div>
  </div>
</div>

<!-- modal trainer schedule modal info -->
<div aria-hidden="true" aria-labelledby="" class="modal fade bd-example-modal-lg" id="trainerScheduleModal" role="dialog"
     tabindex="-1">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center" id="trainerScheduleModalTitle">{{'WORKOUTS.TABLE.TITLE.TRAINER_SCHEDULE' | translate}}
        </h5>
        <button aria-label="Close" class="close" data-dismiss="modal" type="button">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="table-responsive">
          <table [hidden]="!isAdminOrCoach" class="table table-hover">
            <thead class="table-borderless">
            <tr class="text-center">
              <th [hidden]="!isAdmin" class="d-none d-lg-table-cell">Id</th>
              <th>{{'WORKOUTS.TABLE.NAME' | translate}}</th>
              <th>{{'WORKOUTS.TABLE.ROOM_NUMBER' | translate}}</th>
              <th class="d-none d-lg-table-cell">{{'WORKOUTS.TABLE.TRAINER_USERNAME' | translate}}</th>
              <th>{{'WORKOUTS.TABLE.START_DATE' | translate}}</th>
              <th>{{'WORKOUTS.TABLE.END_DATE' | translate}}</th>
              <th class="d-none d-md-table-cell">{{'WORKOUTS.TABLE.CAPPACITY' | translate}}</th>
              <th class="d-none d-md-table-cell">{{'WORKOUTS.TABLE.PARTICIPANTS_NUMBER' | translate}}</th>
              <th class="d-none d-md-table-cell">{{'WORKOUTS.TABLE.DIFFICULTY' | translate}}</th>
            </tr>
            </thead>
            <tbody *ngFor="let appWorkout of trainerWorkouts | paginate: { itemsPerPage: 5, currentPage: currentTrainerWorkoutsPage, id:'currentTrainerWorkouts'}">
            <tr class="text-center">
              <td (click)="onSelectTrainerWorkout(appWorkout)" [hidden]="!isAdmin" class="d-none d-lg-table-cell">{{appWorkout.id}}</td>
              <td (click)="onSelectTrainerWorkout(appWorkout)">{{appWorkout.workoutName}}</td>
              <td (click)="onSelectTrainerWorkout(appWorkout)">{{appWorkout.roomNumber}}</td>
              <td (click)="onSelectTrainerWorkout(appWorkout)" class="d-none d-lg-table-cell">{{appWorkout.trainerUsername}}</td>
              <td (click)="onSelectTrainerWorkout(appWorkout)">{{appWorkout.workoutStartDate | date:'medium'}}</td>
              <td (click)="onSelectTrainerWorkout(appWorkout)">{{appWorkout.workoutEndDate | date:'medium'}}</td>
              <td (click)="onSelectTrainerWorkout(appWorkout)" class="d-none d-md-table-cell">{{appWorkout.capacity}}</td>
              <td (click)="onSelectTrainerWorkout(appWorkout)" class="d-none d-md-table-cell">{{appWorkout.participantsNumber}}</td>
              <td (click)="onSelectTrainerWorkout(appWorkout)" class="d-none d-md-table-cell">{{appWorkout.workoutDifficulty}}</td>
            </tr>
            </tbody>
          </table>
          <pagination-controls (pageChange)="currentTrainerWorkoutsPage = $event" id="currentTrainerWorkouts" ></pagination-controls>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-dismiss="modal" type="button">{{'WORKOUTS.TABLE.CLOSE' | translate}}</button>
      </div>
    </div>
  </div>
</div>

<!-- modal user joined workout info -->
<div class="modal fade bd-example-modal-lg" id="viewTrainerWorkoutModal" tabindex="-1" role="dialog" aria-labelledby=""
     aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center" id="viewTrainerWorkoutModalTitle">{{selectedWorkout.workoutName}}
        </h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <table [hidden]="!isAdminOrCoach" class="table table-hover">
          <thead class="table-borderless">
          <tr class="text-center">
            <th>Firstname</th>
            <th>Lastname</th>
            <th>Username</th>
            <th>Actions</th>
          </tr>
          </thead>
          <tbody *ngFor="let user of listOfUserJoinedWorkout">
          <tr class="text-center">
            <td>{{user.firstName}}</td>
            <td>{{user.lastName}}</td>
            <td>{{user.username}}</td>
            <td class="">
              <div class="btn-group">
                <button (click)="addPoints(user)" class="btn btn-outline-info"><i class="fas fa-plus"></i></button>
                <button (click)="removePoints(user)" class="btn btn-outline-danger"><i class="fas fa-trash"></i></button>
              </div>
            </td>
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- model add workout -->
<div class="modal draggable fade bd-example-modal-lg" id="addWorkoutModal" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center">New Workout</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div>
          <form #newWorkoutForm="ngForm" (ngSubmit)="onAddNewWorkout(newWorkoutForm)">
            <div class="form-group">
              <label for="workoutName">{{'WORKOUTS.TABLE.NAME' | translate}}</label>
              <input type="text" name="workoutName" required ngModel class="form-control">
            </div>
            <div class="form-group">
              <label for="roomNumber">{{'WORKOUTS.TABLE.ROOM_NUMBER' | translate}}</label>
              <input type="text" name="roomNumber" required ngModel class="form-control">
            </div>
            <div class="form-group">
              <label for="trainerUsername">{{'WORKOUTS.TABLE.TRAINER_USERNAME' | translate}}</label>
              <select [(ngModel)]="editWorkout.trainerUsername" class="form-control" name="trainerUsername" required>
                <option *ngFor="let trainer of listOfTrainers" [value]="trainer.username">{{ trainer.username }}</option>
              </select>
            </div>
            <div class="form-group">
              <label for="capacity">{{'WORKOUTS.TABLE.CAPPACITY' | translate}}</label>
              <input type="number" name="capacity" required ngModel class="form-control">
            </div>
            <div class="form-group">
              <label for="participantsNumber">{{'WORKOUTS.TABLE.PARTICIPANTS_NUMBER' | translate}}</label>
              <input type="number" name="participantsNumber" required ngModel class="form-control">
            </div>
            <div class="form-group">
              <label for="workoutStartDate">{{'WORKOUTS.TABLE.START_DATE' | translate}}</label>
              <input type="datetime-local" name="workoutStartDate" required ngModel class="form-control">
            </div>

            <div class="form-group">
              <label for="workoutEndDate">{{'WORKOUTS.TABLE.END_DATE' | translate}}</label>
              <input type="datetime-local" name="workoutEndDate" required ngModel class="form-control">
            </div>

            <div class="form-group">
              <label for="isCyclical">Cyclical</label>
              <input type="checkbox" name="isCyclical"  ngModel class="form-control">
            </div>

            <div class="form-group">
              <label for="numberOfCycles">Number of cycles</label>
              <input type="number" name="numberOfCycles"  ngModel class="form-control">
            </div>

            <div class="form-group">
              <label [(ngModel)]="editWorkout.workoutDifficulty" for="workoutDifficulty" required>{{'WORKOUTS.TABLE.DIFFICULTY' | translate}}</label>
              <select class="form-control" name="workoutDifficulty">
                <option value="BEGINNER">{{'WORKOUTS.DIFFICULTY.BEGINNER' | translate}}BEGINNER</option>
                <option value="EASY">{{'WORKOUTS.DIFFICULTY.EASY' | translate}}EASY</option>
                <option value="MEDIUM">{{'WORKOUTS.DIFFICULTY.MEDIUM' | translate}}MEDIUM</option>
                <option value="HARD">{{'WORKOUTS.DIFFICULTY.HARD' | translate}}HARD</option>
                <option value="VERY_HARD">{{'WORKOUTS.DIFFICULTY.VERY_HARD' | translate}}VERY_HARD</option>
              </select>
            </div>

            <button type="submit" style="display: none;" id="new-workout-save"></button>
          </form>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal" id="new-workout-close">Close</button>
        <button type="button" (click)="saveNewWorkout()" [disabled]="newWorkoutForm.invalid" class="btn btn-primary">Save
          changes
        </button>
      </div>
    </div>
  </div>
</div>

<!-- modal edit workout -->
<div class="modal draggable fade bd-example-modal-lg" id="editWorkoutModal" tabindex="-1"
     role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-center">Edit {{editWorkout.workoutName}}<small [hidden]="isAdmin">
            (read only)
          </small></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="">
          <form #editWorkoutForm="ngForm">
            <div class="form-group">
              <label for="id">Workout id</label>
              <input type="text" name="id" [disabled]="true" required [(ngModel)]="editWorkout.id" class="form-control">
            </div>

            <div class="form-group">
              <label for="workoutName">{{'WORKOUTS.TABLE.NAME' | translate}}</label>
              <input type="text" name="workoutName" [disabled]="!isAdminOrCoach" required [(ngModel)]="editWorkout.workoutName" class="form-control">
            </div>

            <div class="form-group">
              <label for="roomNumber">{{'WORKOUTS.TABLE.ROOM_NUMBER' | translate}}</label>
              <input type="number" name="roomNumber" [disabled]="!isAdminOrCoach" required [(ngModel)]="editWorkout.roomNumber" class="form-control">
            </div>

            <div class="form-group">
              <label for="trainerUsername">{{'WORKOUTS.TABLE.TRAINER_USERNAME' | translate}}</label>
              <select name="trainerUsername" [disabled]="!isAdminOrCoach" required [(ngModel)]="editWorkout.trainerUsername" class="form-control">
                <option *ngFor="let trainer of listOfTrainers" [value]="trainer.username">{{ trainer.username }}</option>
              </select>
            </div>

            <div class="form-group">
              <label for="capacity">{{'WORKOUTS.TABLE.CAPPACITY' | translate}}</label>
              <input type="number" name="capacity" [disabled]="!isAdminOrCoach" required [(ngModel)]="editWorkout.capacity" class="form-control">
            </div>

            <div class="form-group">
              <label for="participantsNumber">{{'WORKOUTS.TABLE.PARTICIPANTS_NUMBER' | translate}}</label>
              <input type="number" name="participantsNumber" [disabled]="!isAdminOrCoach" required [(ngModel)]="editWorkout.participantsNumber" class="form-control">
            </div>

            <div class="form-group">
              <label for="workoutStartDate">{{'WORKOUTS.TABLE.START_DATE' | translate}}</label>
              <input type="datetime-local" name="workoutStartDate" [disabled]="!isAdminOrCoach" required [(ngModel)]="editWorkout.workoutStartDate" class="form-control">
            </div>

            <div class="form-group">
              <label for="workoutEndDate">{{'WORKOUTS.TABLE.END_DATE' | translate}}</label>
              <input type="datetime-local" name="workoutEndDate" [disabled]="!isAdminOrCoach" required [(ngModel)]="editWorkout.workoutEndDate" class="form-control">
            </div>

            <div class="form-group">
              <label for="workoutDifficulty">{{'WORKOUTS.TABLE.DIFFICULTY' | translate}}</label>
              <select [(ngModel)]="editWorkout.workoutDifficulty" [disabled]="!isAdminOrCoach" class="form-control" name="workoutDifficulty" required>
                <option value="BEGINNER">{{'WORKOUTS.DIFFICULTY.BEGINNER' | translate}}</option>
                <option value="EASY">{{'WORKOUTS.DIFFICULTY.EASY' | translate}}</option>
                <option value="MEDIUM">{{'WORKOUTS.DIFFICULTY.MEDIUM' | translate}}</option>
                <option value="HARD">{{'WORKOUTS.DIFFICULTY.HARD' | translate}}</option>
                <option value="VERY_HARD">{{'WORKOUTS.DIFFICULTY.VERY_HARD' | translate}}</option>
              </select>

            </div>
          </form>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-dismiss="modal" id="closeEditWorkoutModalButton" type="button">{{'WORKOUTS.TABLE.CLOSE' | translate}}</button>
        <button (click)="onUpdateWorkout()" [disabled]="editWorkoutForm.invalid || !isAdminOrCoach" class="btn btn-primary" type="button">{{'WORKOUTS.TABLE.SAVE' | translate}}</button>
      </div>
    </div>
  </div>
</div>

